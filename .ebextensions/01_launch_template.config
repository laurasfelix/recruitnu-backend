Resources:
  AWSEBAutoScalingLaunchTemplate:
    Type: AWS::EC2::LaunchTemplate
    Properties:
      LaunchTemplateName: !Sub "${AWS::StackName}-template"
      LaunchTemplateData:
        InstanceType: t2.micro
        KeyName: !Ref AWSEBKeyPair
        ImageId: !Ref AWSEBAmiId
        SecurityGroupIds:
          - !Ref AWSEBSecurityGroup
        UserData:
          Fn::Base64: !Sub |
            #!/bin/bash
            /opt/elasticbeanstalk/hooks/appdeploy/pre/50restart.sh
      Tags:
        - Key: Name
          Value: !Sub "${AWS::StackName}-instance"